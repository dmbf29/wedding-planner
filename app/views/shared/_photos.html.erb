<div class="row" data-controller="lightbox">
  <% (1..number).each_slice(5).with_index do |slice, i| %>
    <div class="image-grid mb-2" style="direction: <%= 'rtl' if i.odd? %>;" >
      <% slice.each_with_index do |num, index| %>
        <div class="image-grid-item <%= index.zero? ? 'main' : "item#{index}" %>">
          <%= link_to url_for(image_path("#{folder}/#{num}.jpg")), data: { action: "click->lightbox#open", lightbox_src: url_for(image_path("#{folder}/#{num}.jpg")) } do %>
            <%= image_tag "#{folder}/#{num}.jpg", alt: "text", class: 'image-item' %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
  <!-- The dialog lives inside the same controller scope -->
  <dialog data-lightbox-target="dialog" class="lightbox">
    <button type="button" class="lightbox-close" aria-label="Close" data-action="lightbox#close">×</button>
    <!-- prev/next buttons -->
    <button type="button" class="lightbox-nav lightbox-prev" aria-label="Previous" data-action="lightbox#prev">‹</button>
    <button type="button" class="lightbox-nav lightbox-next" aria-label="Next" data-action="lightbox#next">›</button>
    <img data-lightbox-target="image" alt="">
    <figcaption data-lightbox-target="caption" class="lightbox-caption"></figcaption>
  </dialog>
</div>
<div data-controller="lightbox">
  <% (1..number).each_slice(2) do |nums| %>
    <div class="row d-md-none">
      <% nums.each do |num| %>
        <div class="col-6 g-3">
          <%= link_to url_for(image_path("#{folder}/#{num}.jpg")), data: { action: "click->lightbox#open", lightbox_src: url_for(image_path("#{folder}/#{num}.jpg")) } do %>
            <%= image_tag "#{folder}/#{num}.jpg", alt: "text", class: 'image-grid-mobile-item' %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
  <!-- The dialog lives inside the same controller scope -->
  <dialog data-lightbox-target="dialog" class="lightbox">
    <button type="button" class="lightbox-close" aria-label="Close" data-action="lightbox#close">×</button>
    <!-- prev/next buttons -->
    <button type="button" class="lightbox-nav lightbox-prev" aria-label="Previous" data-action="lightbox#prev">‹</button>
    <button type="button" class="lightbox-nav lightbox-next" aria-label="Next" data-action="lightbox#next">›</button>
    <img data-lightbox-target="image" alt="">
    <figcaption data-lightbox-target="caption" class="lightbox-caption"></figcaption>
  </dialog>
</div>
